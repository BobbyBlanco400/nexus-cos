# ==============================================================================
# Nexus COS - NGINX Configuration
# ==============================================================================
# PF ID: SCAFFOLD_WIRE_NEXUS_COS_STACK
# Domains: nexuscos.online, www.nexuscos.online
# ==============================================================================

# ==============================================================================
# UPSTREAM DEFINITIONS
# ==============================================================================

# SDK & Streaming Core
upstream puaboai_sdk {
    server 127.0.0.1:3010;
    keepalive 32;
}

upstream streamcore {
    server 127.0.0.1:3002;
    keepalive 32;
}

upstream pv_keys {
    server 127.0.0.1:3014;
    keepalive 32;
}

# ==============================================================================
# V-SUITE MODULE (Main Virtual Production Suite)
# ==============================================================================
# V-Suite is the parent module with sub-modules:
# - V-Screen Hollywood (port 3012)
# - V-Stage (port 3013) 
# - V-Prompter Pro 10x10 (port 3047)
# - V-Caster Pro (port 3048)
# ==============================================================================

# V-Suite Main Gateway - Port 3005
upstream v_suite {
    server 127.0.0.1:3005;
    keepalive 32;
}

# V-Suite Sub-Module: V-Screen Hollywood - Port 3012
upstream v_suite_vscreen_hollywood {
    server 127.0.0.1:3012;
    keepalive 32;
}

# V-Suite Sub-Module: V-Stage - Port 3013
upstream v_suite_vstage {
    server 127.0.0.1:3013;
    keepalive 32;
}

# V-Suite Sub-Module: V-Prompter Pro 10x10 - Port 3047
upstream v_suite_vprompter_pro {
    server 127.0.0.1:3047;
    keepalive 32;
}

# V-Suite Sub-Module: V-Caster Pro - Port 3048
upstream v_suite_vcaster_pro {
    server 127.0.0.1:3048;
    keepalive 32;
}

# Socket.IO / Streaming
upstream socket_streaming {
    server 127.0.0.1:3043;
    keepalive 32;
}

# Backend Services
upstream nexus_backend_api {
    server 127.0.0.1:3001;
    keepalive 32;
}

upstream auth_service {
    server 127.0.0.1:3041;
    keepalive 32;
}

upstream profile_service {
    server 127.0.0.1:3042;
    keepalive 32;
}

upstream streaming_service {
    server 127.0.0.1:3043;
    keepalive 32;
}

upstream tvradio_service {
    server 127.0.0.1:3044;
    keepalive 32;
}

upstream musicmedia_service {
    server 127.0.0.1:3045;
    keepalive 32;
}

upstream monetization_service {
    server 127.0.0.1:3046;
    keepalive 32;
}

upstream blac_service {
    server 127.0.0.1:3047;
    keepalive 32;
}

upstream notifications_service {
    server 127.0.0.1:3048;
    keepalive 32;
}

upstream admin_service {
    server 127.0.0.1:3049;
    keepalive 32;
}

# PUABO TV Modules
upstream puabo_tv_main {
    server 127.0.0.1:5310;
    keepalive 32;
}

upstream puabo_radio {
    server 127.0.0.1:5311;
    keepalive 32;
}

upstream puabo_sports_network {
    server 127.0.0.1:5313;
    keepalive 32;
}

upstream puabo_news_hub {
    server 127.0.0.1:5314;
    keepalive 32;
}

# Creator Studio Modules
upstream creator_studio_pro {
    server 127.0.0.1:5315;
    keepalive 32;
}

upstream live_stream_manager {
    server 127.0.0.1:5316;
    keepalive 32;
}

upstream show_template_engine {
    server 127.0.0.1:5317;
    keepalive 32;
}

upstream content_library {
    server 127.0.0.1:5318;
    keepalive 32;
}

upstream talk_show_studio {
    server 127.0.0.1:5320;
    keepalive 32;
}

upstream game_show_creator {
    server 127.0.0.1:5321;
    keepalive 32;
}

# AI Modules
upstream script_analyzer {
    server 127.0.0.1:5341;
    keepalive 32;
}

upstream content_moderator {
    server 127.0.0.1:5343;
    keepalive 32;
}

upstream voice_synthesis {
    server 127.0.0.1:5344;
    keepalive 32;
}

upstream scene_recommender {
    server 127.0.0.1:5345;
    keepalive 32;
}

upstream metadata_tagger {
    server 127.0.0.1:5346;
    keepalive 32;
}

# Analytics Modules
upstream audience_analytics {
    server 127.0.0.1:5350;
    keepalive 32;
}

upstream revenue_dashboard {
    server 127.0.0.1:5351;
    keepalive 32;
}

upstream creator_insights {
    server 127.0.0.1:5352;
    keepalive 32;
}

# Nexus Fleet
upstream nexus_stream {
    server 127.0.0.1:5201;
    keepalive 32;
}

upstream nexus_ott {
    server 127.0.0.1:5202;
    keepalive 32;
}

upstream nexusnet {
    server 127.0.0.1:5203;
    keepalive 32;
}

upstream nexus_link {
    server 127.0.0.1:5204;
    keepalive 32;
}

upstream casino_nexus {
    server 127.0.0.1:5205;
    keepalive 32;
}

upstream virtual_soccer_league {
    server 127.0.0.1:5206;
    keepalive 32;
}

upstream urban {
    server 127.0.0.1:5207;
    keepalive 32;
}

upstream family {
    server 127.0.0.1:5208;
    keepalive 32;
}

# Landing Pages / Creator Channels - Line 225-233
upstream idh_live {
    server 127.0.0.1:5225;
    keepalive 32;
}

upstream clocking_t {
    server 127.0.0.1:5226;
    keepalive 32;
}

upstream metatwin {
    server 127.0.0.1:5227;
    keepalive 32;
}

upstream ahshanti_munch {
    server 127.0.0.1:5228;
    keepalive 32;
}

upstream tyshawn_dance {
    server 127.0.0.1:5229;
    keepalive 32;
}

upstream fayeloni {
    server 127.0.0.1:5230;
    keepalive 32;
}

upstream sassie_lashes {
    server 127.0.0.1:5231;
    keepalive 32;
}

upstream neenee_kids {
    server 127.0.0.1:5232;
    keepalive 32;
}

upstream roro_gaming {
    server 127.0.0.1:5233;
    keepalive 32;
}

# ==============================================================================
# SERVER BLOCK - HTTP Redirect
# ==============================================================================

server {
    listen 80;
    listen [::]:80;
    server_name nexuscos.online www.nexuscos.online;
    
    # Redirect all HTTP to HTTPS
    return 301 https://$host$request_uri;
}

# ==============================================================================
# SERVER BLOCK - HTTPS
# ==============================================================================

server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name nexuscos.online www.nexuscos.online;
    
    # SSL Configuration
    ssl_certificate /etc/letsencrypt/live/nexuscos.online/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/nexuscos.online/privkey.pem;
    ssl_session_timeout 1d;
    ssl_session_cache shared:SSL:50m;
    ssl_session_tickets off;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;
    
    # Security Headers
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "strict-origin-when-cross-origin" always;
    
    # Logging
    access_log /var/log/nginx/nexus-cos.access.log;
    error_log /var/log/nginx/nexus-cos.error.log;
    
    # ==========================================================================
    # HEALTH ENDPOINTS (PF proxy_rules.health)
    # ==========================================================================
    
    # V-Suite Health: /api/v-suite/health -> V-Suite main gateway
    location = /api/v-suite/health {
        proxy_pass http://v_suite/health;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # V-Suite/V-Screen Hollywood Health
    location = /api/v-suite/vscreen-hollywood/health {
        proxy_pass http://v_suite_vscreen_hollywood/health;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # V-Suite/V-Stage Health
    location = /api/v-suite/vstage/health {
        proxy_pass http://v_suite_vstage/health;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # V-Suite/V-Prompter Pro Health
    location = /api/v-suite/vprompter-pro/health {
        proxy_pass http://v_suite_vprompter_pro/health;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # V-Suite/V-Caster Pro Health
    location = /api/v-suite/vcaster-pro/health {
        proxy_pass http://v_suite_vcaster_pro/health;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # ==========================================================================
    # SOCKET.IO ENDPOINTS (PF proxy_rules.socketio)
    # ==========================================================================
    
    # Primary Socket.IO: /socket.io -> http://127.0.0.1:3043/socket.io
    location /socket.io {
        proxy_pass http://socket_streaming;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_read_timeout 86400;
        proxy_send_timeout 86400;
    }
    
    # Streaming Socket.IO Mirror: /streaming/socket.io -> http://127.0.0.1:3043/socket.io
    location /streaming/socket.io {
        proxy_pass http://socket_streaming/socket.io;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_read_timeout 86400;
        proxy_send_timeout 86400;
    }
    
    # ==========================================================================
    # V-SUITE ROUTES (Main Module with Sub-Modules)
    # ==========================================================================
    # V-Suite is the parent module containing:
    # - V-Screen Hollywood (/v-suite/vscreen-hollywood)
    # - V-Stage (/v-suite/vstage)
    # - V-Prompter Pro 10x10 (/v-suite/vprompter-pro)
    # - V-Caster Pro (/v-suite/vcaster-pro)
    # ==========================================================================
    
    # V-Suite Main Gateway
    location /v-suite {
        proxy_pass http://v_suite;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # V-Suite Sub-Module: V-Screen Hollywood
    location /v-suite/vscreen-hollywood {
        proxy_pass http://v_suite_vscreen_hollywood;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # V-Suite Sub-Module: V-Stage
    location /v-suite/vstage {
        proxy_pass http://v_suite_vstage;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # V-Suite Sub-Module: V-Prompter Pro 10x10
    location /v-suite/vprompter-pro {
        proxy_pass http://v_suite_vprompter_pro;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # V-Suite Sub-Module: V-Caster Pro
    location /v-suite/vcaster-pro {
        proxy_pass http://v_suite_vcaster_pro;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # ==========================================================================
    # API ROUTES
    # ==========================================================================
    
    location /api {
        proxy_pass http://nexus_backend_api;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /api/auth {
        proxy_pass http://auth_service;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /api/profile {
        proxy_pass http://profile_service;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /api/streaming {
        proxy_pass http://streaming_service;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /api/tv {
        proxy_pass http://tvradio_service;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /api/radio {
        proxy_pass http://tvradio_service;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /api/music {
        proxy_pass http://musicmedia_service;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /api/monetization {
        proxy_pass http://monetization_service;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /api/blac {
        proxy_pass http://blac_service;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /api/notifications {
        proxy_pass http://notifications_service;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /api/admin {
        proxy_pass http://admin_service;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # ==========================================================================
    # PUABO TV ROUTES
    # ==========================================================================
    
    location /tv {
        proxy_pass http://puabo_tv_main;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /radio {
        proxy_pass http://puabo_radio;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /sports {
        proxy_pass http://puabo_sports_network;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /news {
        proxy_pass http://puabo_news_hub;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # ==========================================================================
    # CREATOR STUDIO ROUTES
    # ==========================================================================
    
    location /studio {
        proxy_pass http://creator_studio_pro;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /live-manager {
        proxy_pass http://live_stream_manager;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /templates {
        proxy_pass http://show_template_engine;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /library {
        proxy_pass http://content_library;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /talk-show {
        proxy_pass http://talk_show_studio;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /game-show {
        proxy_pass http://game_show_creator;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # ==========================================================================
    # AI ROUTES
    # ==========================================================================
    
    location /ai/script {
        proxy_pass http://script_analyzer;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /ai/moderate {
        proxy_pass http://content_moderator;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /ai/voice {
        proxy_pass http://voice_synthesis;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /ai/scene {
        proxy_pass http://scene_recommender;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /ai/metadata {
        proxy_pass http://metadata_tagger;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # ==========================================================================
    # ANALYTICS ROUTES
    # ==========================================================================
    
    location /analytics/audience {
        proxy_pass http://audience_analytics;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /analytics/revenue {
        proxy_pass http://revenue_dashboard;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /analytics/creator {
        proxy_pass http://creator_insights;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # ==========================================================================
    # NEXUS FLEET ROUTES
    # ==========================================================================
    
    location /nexus-stream {
        proxy_pass http://nexus_stream;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /nexus-ott {
        proxy_pass http://nexus_ott;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /nexusnet {
        proxy_pass http://nexusnet;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /nexus-link {
        proxy_pass http://nexus_link;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /casino {
        proxy_pass http://casino_nexus;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /soccer {
        proxy_pass http://virtual_soccer_league;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /urban {
        proxy_pass http://urban;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /family {
        proxy_pass http://family;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # ==========================================================================
    # LANDING PAGES / CREATOR CHANNELS
    # ==========================================================================
    
    location /idh-live {
        proxy_pass http://idh_live;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /clocking-t {
        proxy_pass http://clocking_t;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /metatwin {
        proxy_pass http://metatwin;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /ahshanti-munch {
        proxy_pass http://ahshanti_munch;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /tyshawn-dance {
        proxy_pass http://tyshawn_dance;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /fayeloni {
        proxy_pass http://fayeloni;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /sassie-lashes {
        proxy_pass http://sassie_lashes;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /neenee-kids {
        proxy_pass http://neenee_kids;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /roro-gaming {
        proxy_pass http://roro_gaming;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # ==========================================================================
    # HEALTH AGGREGATOR
    # ==========================================================================
    
    location /health {
        access_log off;
        return 200 '{"status":"ok","service":"nexus-cos-gateway","version":"1.0.0"}';
        add_header Content-Type application/json;
    }
    
    # ==========================================================================
    # DEFAULT LOCATION
    # ==========================================================================
    
    location / {
        proxy_pass http://nexus_backend_api;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
